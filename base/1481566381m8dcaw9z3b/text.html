<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Во-первых, шорткаты (в порядке убывания популярности):<br /><br /><span style=" font-family:'FreeMono'; color:#6a1009;">alias gst='git-status' <br />alias ga='git-add'<br />alias gc='git-commit -m'<br />alias gp='git pull &amp;&amp; git push'<br />alias gull='git pull'<br />alias gush='git push'<br />alias gb='git-branch'<br />alias gco='git-checkout'<br />alias gd='git-diff'</span><br /><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Типичный поток работы в одной ветке</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1) Что-то пописали, прогнали тесты<br />2) <span style=" font-family:'FreeMono'; color:#6a1009;">$ gst</span> - увидели, какие файлы новые, какие обновленные.<br />3) <span style=" font-family:'FreeMono'; color:#6a1009;">$ ga a b c</span> - добавили новые и обновленные файлы в индекс.<br />4) <span style=" font-family:'FreeMono'; color:#6a1009;">$ gc 'something is done'</span> - записали коммит в репозиторий<br />5) Снова что-то написали, снова закоммитили.<br />6) <span style=" font-family:'FreeMono'; color:#6a1009;">$ gp</span> - слили чужие изменения, залили свои изменения. Если вдруг возник конфликт, вам об этом напишут, будете мерджить.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы просто подтянуть обновления, набираем <span style=" font-family:'FreeMono'; color:#6a1009;">$ gull (git pull)</span>.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Локальные ветки</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Принцип: одна фича — одна ветка. Один багфикс (если предполагается длиннее двух коммитов) — одна ветка. Один эксперимент — одна ветка. Одна фича внутри эксперимента — ветка от ветки. Ну, вы уловили идею.<br /><br />Зачем оно нужно? Представьте, что вы начали день с фичи А, а к вам подошли и сказали, что нужно зафиксить Б. А через пять минут выяснилось, что для того, чтобы по-человечески зафиксить Б, нужно прикрутить и проверить Ц. Если каждую из этих задач держать в отдельных ветках, то голова не пойдет кругом, и работа не встанет поперек горла. <br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Список всех веток: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">$ gb</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Переключиться на другую ветку: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">$ gco some-branch</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не забывайте, что вы всегда можете подлить какую-нибудь ветку в текущую с помощью <span style=" font-family:'FreeMono';">git merge other-branch</span>.<br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Жизненные ситуации с ветками</span><br /><br />1) Исправление бага/добавление фичи. Делаем ветку, все тестируем, подливаем в нее master: <span style=" font-family:'FreeMono'; color:#6a1009;">gull &amp;&amp; git merge master</span>, снова тестируем, выходим в мастер (<span style=" font-family:'FreeMono'; color:#6a1009;">gco master</span>), подливаем ветку (<span style=" font-family:'FreeMono'; color:#6a1009;">git merge my-branch</span>), тестируем, заливаем мастер (<span style=" font-family:'FreeMono'; color:#6a1009;">gush</span>) и удаляем ветку (<span style=" font-family:'FreeMono'; color:#6a1009;">gb -D my-branch</span>).<br /><br />2) Публикация ветки для совместной работы: <span style=" font-family:'FreeMono'; color:#6a1009;">gush origin my-branch:refs/heads/my-branch</span><br />Удаление ветки: <span style=" font-family:'FreeMono'; color:#6a1009;">gush origin :refs/heads/my-branch</span> <span style=" font-style:italic;">(внимание на пробел перед двоеточием)</span><br /><br />3) Вы сидите в одной ветке и сделали что-то, что хотели бы закоммитить в другую ветку. Если вы еще не закоммитили, то делаем <span style=" font-family:'FreeMono'; color:#6a1009;">git reset HEAD</span> для уже добавленных файлов (через<span style=" font-family:'FreeMono';"> ga/git-add</span>), потом <span style=" font-family:'FreeMono'; color:#6a1009;">git-stash</span>, выходим в нужную ветку, делаем <span style=" font-family:'FreeMono'; color:#6a1009;">git-stash apply</span> и далее действуем так, как будто мы прямо тут все и меняли.<br /><br />4) Вы сделали коммит в некоторую экспериментальную ветку, который имеет смысл залить в мастер, но git merge my-branch не подходит, потому что после этого коммита были еще несколько экспериментальных коммитов.<br /><br />На этот случай есть <span style=" font-family:'FreeMono';">git-cherry-pick</span>. Вначале, посмотрите <span style=" font-family:'FreeMono';">git-log</span> и скопируйте номер нужного коммита. Далее, вы должны закоммитить все изменения в той ветке, в которую будете кидать выдернутый коммит. Затем, делаете <span style=" font-family:'FreeMono';">git-cherry-pick</span> и разруливаете конфликты, если возникли. <br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">У меня такая ситуация была именно с добавлением коммита в мастер, поэтому после этих хирургических манипуляций мне нужно было подлить мастер в локальную ветку. Поскольку <span style=" font-family:'FreeMono';">cherry-pick</span> всего лишь применяет дифф (номер коммита становится другим), то ветка не знает, что внесенное изменение у нее уже есть, и не может нормально его смерджить. Поэтому, при мердже мастера в ветку вы гарантированно получите глупые конфликты а-ля &quot;строчка АБВ конфликтует с АБВ&quot;. <br /><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скучные нравоучения напоследок<br /><br />1) Коммиты должны быть мелкими. Дифф на пять экранов должен быть исключением, а не правилом. <br />2) На первых порах не морочьте себе голову с rebase и &quot;чистотой&quot; линии коммитов. Это беспокоит только последних эстетов или Линуса (который мерджит десяток веток в день). Читать <span style=" font-family:'FreeMono';">git-log</span> и игнорировать банальные <span style=" font-family:'FreeMono';">merge commits</span> нет никакой проблемы.<br />3) Читайте <span style=" font-family:'FreeMono';">git-log</span> после <span style=" font-family:'FreeMono';">pull</span>, ругайте своих коллег за невразумительные описания коммитов.<br />4) Изучите<span style=" font-family:'FreeMono';"> .git/config</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>